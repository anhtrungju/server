execute at @e[type=marker,tag=nmr_golden_guardian_spawner,limit=1,sort=nearest] run playsound entity.wither.spawn hostile @a ~ ~5 ~ 1 0.5
execute at @e[type=marker,tag=nmr_golden_guardian_spawner,limit=1,sort=nearest] run particle dust{color:[0.961,0.071,0.071],scale: 4} ~ ~5 ~ 1.5 1.5 1.5 0 250
execute at @e[type=marker,tag=nmr_golden_guardian_spawner,limit=1,sort=nearest] run particle dust{color:[0.961,0.871,0.071],scale: 4} ~ ~5 ~ 1.5 1.5 1.5 0 250

execute at @e[type=marker,tag=nmr_golden_guardian_spawner,limit=1,sort=nearest] run summon vex ~ ~5 ~ {CustomName:'{"text":"Golden Guardian","color":"yellow","bold":false,"italic":false}',Silent:1b,DeathLootTable:"nmr:golden_guardian",Tags:["nmr_has_display","nmr_headmob_base","nmr_golden_guardian","nmr_speed_set","nmr_resized"],PersistenceRequired:1b,Health:400f,attributes:[{id:"minecraft:generic.max_health",base:400},{id:"minecraft:generic.scale",base:3}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmr_headmob_head","nmr_golden_guardian_head","nmr_speed_set","nmr_resized"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[3f,3f,3f]},item:{id:"minecraft:player_head",count:1,components:{profile:{name:"goldenguardian",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmE0MWM4NTEwN2Y4YTI5YjU0NWNlZWFlN2RmNmNkODVhODVhMDU1ZWJkNTA1OGQ1NzNhNzk3OTQ2MGY2NzM0NiJ9fX0="}]}}},Passengers:[{id:"minecraft:piglin",DeathLootTable:"nmr:empty",Silent:1b,Invulnerable:1b,IsBaby:0b,IsImmuneToZombification:1b,CannotHunt:1b,Tags:["nmr_has_display","nmr_golden_guardian_rider","nmr_fully_equipped","nmr_rarity_set"],ArmorItems:[{id:"minecraft:golden_boots",count:1,components:{trim:{material:"minecraft:redstone",pattern:"minecraft:silence"}}},{id:"minecraft:golden_leggings",count:1,components:{trim:{material:"minecraft:redstone",pattern:"minecraft:silence"}}},{id:"minecraft:golden_chestplate",count:1,components:{trim:{material:"minecraft:redstone",pattern:"minecraft:silence"}}},{id:"minecraft:yellow_stained_glass",count:1}],ArmorDropChances:[0.000F,0.000F,0.000F,0.000F],HandItems:[{id:"minecraft:crossbow",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:multishot":4,"minecraft:piercing":1,"minecraft:quick_charge":3}},charged_projectiles:[{id:"minecraft:tipped_arrow",count:1,components:{"minecraft:potion_contents":{potion:"minecraft:slow_falling"},"minecraft:intangible_projectile":{}}}]}},{}],HandDropChances:[0.000F,0.000F]}]}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b}]}
execute at @e[type=marker,tag=nmr_golden_guardian_spawner,limit=1,sort=nearest] run scoreboard players set @a[distance=..128] nmr.piglinaut.killcount 0

execute as @e[type=item_display,tag=nmr_golden_guardian_head] run team join nmr_special_mobs @s
execute as @e[type=piglin,tag=nmr_golden_guardian_rider] run team join nmr_special_mobs @s
