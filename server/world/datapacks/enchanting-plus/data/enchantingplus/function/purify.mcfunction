execute as @a[nbt={SelectedItem:{id:"minecraft:shield",components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] run tag @s add enchantingplus.purify.hold
execute as @a[nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] run tag @s add enchantingplus.purify.hold

execute as @a[nbt=!{SelectedItem:{id:"minecraft:shield",components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] unless entity @s[nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] run tag @s remove enchantingplus.purify.hold
execute as @a[nbt=!{Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] unless entity @s[nbt={SelectedItem:{id:"minecraft:shield",components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] run tag @s remove enchantingplus.purify.hold

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:blindness"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:blindness"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:blindness"}]}] run effect clear @s minecraft:blindness

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:darkness"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:darkness"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:darkness"}]}] run effect clear @s minecraft:darkness

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:glowing"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:glowing"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:glowing"}]}] run effect clear @s minecraft:glowing

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:hunger"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:hunger"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:hunger"}]}] run effect clear @s minecraft:hunger

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:infested"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:infested"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:infested"}]}] run effect clear @s minecraft:infested

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:instant_damage"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:instant_damage"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:instant_damage"}]}] run effect clear @s minecraft:instant_damage

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:levitation"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:levitation"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:levitation"}]}] run effect clear @s minecraft:levitation

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:mining_fatigue"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:mining_fatigue"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:mining_fatigue"}]}] run effect clear @s minecraft:mining_fatigue

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:nausea"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:nausea"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:nausea"}]}] run effect clear @s minecraft:nausea

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:oozing"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:oozing"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:oozing"}]}] run effect clear @s minecraft:oozing

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:poison"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:poison"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:poison"}]}] run effect clear @s minecraft:poison

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:slowness"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:slowness"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:slowness"}]}] run effect clear @s minecraft:slowness

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:unluck"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:unluck"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:unluck"}]}] run effect clear @s minecraft:unluck

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:weakness"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:weakness"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:weakness"}]}] run effect clear @s minecraft:weakness

execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:wither"}]},nbt={SelectedItem:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}}] if predicate enchantingplus:unbreaking/mainhand run item modify entity @s weapon.mainhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:wither"}]},nbt={Inventory:[{id:"minecraft:shield",Slot:-106b,components:{"minecraft:enchantments":{levels:{"enchantingplus:purify":1}}}}]}] if predicate enchantingplus:unbreaking/offhand run item modify entity @s weapon.offhand enchantingplus:-10_shield_durability
execute as @a[tag=enchantingplus.purify.hold,nbt={active_effects:[{id:"minecraft:wither"}]}] run effect clear @s minecraft:wither

execute at @a[tag=enchantingplus.purify.hold] run stopsound @a[distance=..16] * minecraft:item.armor.equip_generic